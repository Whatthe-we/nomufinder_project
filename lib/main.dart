import 'package:flutter/material.dart';import 'package:flutter_riverpod/flutter_riverpod.dart';import 'package:project_nomufinder/services/lawyer_data_loader.dart';import 'package:flutter_dotenv/flutter_dotenv.dart';import 'package:firebase_core/firebase_core.dart';import 'package:firebase_messaging/firebase_messaging.dart';import 'package:go_router/go_router.dart';import 'package:project_nomufinder/config/router.dart';import 'config/providers.dart';import 'firebase_options.dart';import 'package:project_nomufinder/viewmodels/auth_provider.dart';Future<void> _firebaseMessagingBackgroundHandler(RemoteMessage message) async {  print('ğŸ’¬ ë°±ê·¸ë¼ìš´ë“œ ë©”ì‹œì§€ ìˆ˜ì‹ : ${message.messageId}');}Future<void> main() async {  WidgetsFlutterBinding.ensureInitialized();  // âœ… Firebase ì´ˆê¸°í™” (ì¤‘ë³µ ì´ˆê¸°í™” ë°©ì§€)  try {    if (Firebase.apps.isEmpty) {      await Firebase.initializeApp(        options: DefaultFirebaseOptions.currentPlatform,      );      print("âœ… Firebase ì´ˆê¸°í™” ì„±ê³µ");    } else {      print("âœ… Firebase ì´ë¯¸ ì´ˆê¸°í™”ë¨");    }  } catch (e) {    print("âŒ Firebase ì´ˆê¸°í™” ì‹¤íŒ¨: $e");  }  // .env í™˜ê²½ ë³€ìˆ˜ ë¡œë“œ  await dotenv.load(fileName: ".env");  // JSON ë°ì´í„° ë¡œë“œ (ë…¸ë¬´ì‚¬ ë°ì´í„° ë“±)  await loadLawyerData();  // âœ… FCM ì´ˆê¸°í™” ë° ê¶Œí•œ ìš”ì²­  FirebaseMessaging messaging = FirebaseMessaging.instance;  NotificationSettings settings = await messaging.requestPermission(    alert: true,    badge: true,    sound: true,  );  print('ğŸ› ï¸ ê¶Œí•œ ì„¤ì •: ${settings.authorizationStatus}');  // âœ… í† í° ê°€ì ¸ì˜¤ê¸°  String? token = await messaging.getToken();  print('ğŸ”¥ FCM í† í°: $token');  // âœ… ë°±ê·¸ë¼ìš´ë“œ ë©”ì‹œì§€ í•¸ë“¤ëŸ¬ ë“±ë¡  FirebaseMessaging.onBackgroundMessage(_firebaseMessagingBackgroundHandler);  // âœ… í¬ê·¸ë¼ìš´ë“œ ë©”ì‹œì§€ ë¦¬ìŠ¤ë„ˆ ë“±ë¡  FirebaseMessaging.onMessage.listen((RemoteMessage message) {    print('ğŸ’¬ í¬ê·¸ë¼ìš´ë“œ ë©”ì‹œì§€ ìˆ˜ì‹ !');    print('Message data: ${message.data}');    if (message.notification != null) {      print('ğŸ’¬ ì•Œë¦¼ ë‚´ìš©: ${message.notification}');      // UI ì—…ë°ì´íŠ¸ ë˜ëŠ” ì•Œë¦¼ í‘œì‹œ ë¡œì§ (ì˜ˆ: ìŠ¤ë‚µë°”, ë‹¤ì´ì–¼ë¡œê·¸ ë“±)    }  });  runApp(const ProviderScope(child: MyApp()));}class MyApp extends ConsumerWidget {  const MyApp({super.key});  @override  Widget build(BuildContext context, WidgetRef ref) {    final authState = ref.watch(authStateProvider);    final router = ref.watch(routerProvider);    return MaterialApp.router(      routerConfig: router,      debugShowCheckedModeBanner: false,      title: 'NomuFinder',      theme: ThemeData(useMaterial3: true),      builder: (context, child) {        return authState.when(          data: (user) => child!,          loading: () => const Center(child: CircularProgressIndicator()),          error: (e, _) => Center(child: Text('ì—ëŸ¬: $e')),        );      },    );  }}